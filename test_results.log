ğŸ”„ Cleaning up ports 8000-8003...

ğŸš€ Starting all services with unified API gateway...

Usage: ./start_team_all.sh [--clean] [--test]
  --clean: Clean build before starting
  --test:  Run E2E tests after services start

ğŸ¤– Starting Core Agent...
ğŸ”„ Starting Team Core Agent...
ğŸš€ Starting Core Agent on port 8001...

> @qwen-team/ai-agent@1.0.0 start
> node dist/index.js

[INFO] Starting Core Agent server { port: 8001, env: 'development', agentCount: 1 }
[INFO] Loaded 1 agents from configuration
[INFO] ACP Server started on port 8001
ğŸ“¦ Starting Backend...
ğŸ”„ Starting Team Storage...
ğŸš€ Starting Backend on port 8000...

> @qwen-team/storage@1.0.0 start
> node dist/index.js

Backend loading local .env from: /workdisk/hosting/my_qwen_code/qwen-team-work/packages/team-storage/.env
Local .env exists: true
Routes type: function isFunction: true
MongoDB connected successfully
Vector search, image search, and full-text search indexes created successfully for MongoDB Community Edition
[INFO] Backend server started {
  port: 8000,
  env: 'development',
  allowedOrigins: [ 'http://localhost:8002', 'http://team-ui-server:8002' ]
}
ğŸŒ Starting UI Server (API Gateway)...
ğŸ”„ Starting Team Service...
ğŸš€ Starting UI Server on port 8002...

> @qwen-team/service@0.3.0 start
> node dist/index.js

[dotenv@17.2.3] injecting env (0) from .env -- tip: âœ… audit secrets and track compliance: https://dotenvx.com/ops
ğŸ”¥ CONFIG.TS LOADED - ENV VARS: {
  BACKEND_URL: 'http://localhost:8000',
  ACP_WEBSOCKET_URL: 'ws://localhost:8001'
}
ğŸ³ Sandbox cleanup task started (timeout: 60m, interval: 5m)
[INFO] UI Server configuration loaded {
  port: 8002,
  env: 'development',
  baseUrl: undefined,
  corsOrigin: undefined
}
[INFO] AIService initialized { model: 'gpt-3.5-turbo', maxSessions: 1000 }
[INFO] AI Service initialized { model: 'gpt-3.5-turbo', baseUrl: 'http://10.0.0.139:8080/v1' }
ğŸ”¥ INDEX.TS LOADED - TESTING COMPILATION
ğŸ³ Sandbox cleanup task started (timeout: 60m, interval: 5m)
ğŸ”Œ Setting up WebSocket...
âœ… WebSocket setup complete
Loaded 2 agent configurations
ğŸ’» Starting UI Client...

âœ… All services started!
Core Agent PID: 908256
Backend PID: 908286
UI Server PID: 908340
UI Client PID: 908383

ğŸŒ Unified API Gateway Architecture:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ’» UI Client (Frontend):
   URL: http://localhost:8003
   â†’ Routes ALL requests to UI Server

ğŸŒ UI Server (API Gateway):
   URL: http://localhost:8002
   WebSocket: ws://localhost:8002
   Health: http://localhost:8002/health
   Metrics: http://localhost:8002/metrics
   â†’ Proxies API calls to Backend
   â†’ Handles WebSocket connections

ğŸ“¦ Backend (Internal API):
   URL: http://localhost:8000 (internal only)
   Health: http://localhost:8000/health
   â†’ Processes business logic
   â†’ Routes to Core Agent

ğŸ¤– Core Agent (ACP Server):
   WebSocket: ws://localhost:8001 (internal only)
   â†’ Handles LLM communication
   â†’ Manages agent sessions

ğŸ”— Communication Flow:
   Client â†’ UI Server â†’ Backend â†’ Core Agent â†’ LLM

âš™ï¸  Configuration:
   Each service uses its own .env file
   Development environment active

ğŸ“‹ UI Server Environment Variables:
ğŸ”„ Starting Team Web...
grep: packages/team-web/server/.env: No such file or directory
   BACKEND_URL: 
grep: packages/team-web/server/.env: No such file or directory
   ACP_WEBSOCKET_URL: 
ğŸš€ Starting UI Client on port 8003...
grep: packages/team-web/server/.env: No such file or directory
   PORT: 
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â³ Waiting for services to be ready...

> @qwen-team/web@0.3.0 dev
> vite

Vite config - UI Server port: 8002

  VITE v5.4.21  ready in 107 ms

  âœ  Local:   http://localhost:8003/
  âœ  Network: http://192.168.1.188:8003/
  âœ  Network: http://172.19.0.1:8003/

ğŸ§ª Running E2E tests...
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

> @qwen-team/test@1.0.0 test
> node run-tests.js

[34mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[34m  Team Layer E2E Test Suite[0m
[34mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[0m
[34m
â–¶ Running storage.test.js...[0m
Need to install the following packages:
jest@30.2.0
Ok to proceed? (y) 