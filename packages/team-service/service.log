
> @qwen-team/service@0.3.0 start
> node dist/index.js

[dotenv@17.2.3] injecting env (31) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
üî• CONFIG.TS LOADED - ENV VARS: {
  BACKEND_URL: 'http://localhost:8000',
  ACP_WEBSOCKET_URL: 'ws://localhost:8001'
}
[2026-01-02T11:52:30.968Z] [INFO] UI Server configuration loaded {
  port: 8002,
  env: 'development',
  baseUrl: 'http://localhost:8002',
  corsOrigin: 'http://localhost:8003'
}
[2026-01-02T11:52:30.968Z] [INFO] EnhancedAIService initialized {
  agentEndpoint: 'ws://localhost:8001',
  maxSessions: 1000,
  teamFeatures: true,
  telemetry: true
}
[2026-01-02T11:52:30.968Z] [INFO] AI Service initialized with ACP { agentEndpoint: 'ws://localhost:8001' }
[2026-01-02T11:52:30.969Z] [INFO] AIService initialized { model: 'qwen/qwen-coder', maxSessions: 100 }
[2026-01-02T11:52:30.969Z] [INFO] Direct AIService initialized for shell commands
üî• INDEX.TS LOADED - TESTING COMPILATION
Loaded 1 agent configurations
Loaded 1 agent configurations
üê≥ Sandbox cleanup task started (timeout: 60m, interval: 5m)
üìã Registering routes...
‚úÖ Routes registered
üîå Setting up WebSocket...
‚úÖ WebSocket setup complete
üöÄ About to call app.listen()...
üîå Calling app.listen with port: 8002
‚úÖ app.listen() returned successfully
[2026-01-02T11:52:30.981Z] [INFO] UI Server started successfully { port: 8002, host: '0.0.0.0' }
[2026-01-02T11:52:57.737Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'POST',
  url: '/api/auth/login',
  userId: 'anonymous',
  statusCode: 200,
  duration: '71ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[2026-01-02T11:52:57.755Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'GET',
  url: '/api/team/list',
  userId: '695099320356ef030062423b',
  statusCode: 200,
  duration: '9ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[2026-01-02T11:52:58.700Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'POST',
  url: '/api/team/select',
  userId: '695099320356ef030062423b',
  statusCode: 200,
  duration: '5ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[2026-01-02T11:52:58.720Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'GET',
  url: '/api/files/list?workspace_type=team',
  userId: '695099320356ef030062423b',
  statusCode: 200,
  duration: '6ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[2026-01-02T11:52:58.728Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'GET',
  url: '/api/teams/my-teams',
  userId: '695099320356ef030062423b',
  statusCode: 200,
  duration: '12ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[2026-01-02T11:52:58.730Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'GET',
  url: '/api/todos',
  userId: '695099320356ef030062423b',
  statusCode: 200,
  duration: '13ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[2026-01-02T11:52:58.735Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'GET',
  url: '/api/user/profile',
  userId: '695099320356ef030062423b',
  statusCode: 200,
  duration: '17ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[2026-01-02T11:52:58.740Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'GET',
  url: '/api/team/active',
  userId: '695099320356ef030062423b',
  statusCode: 200,
  duration: '7ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[SessionRoute] Creating session with workingDirectory: /workspace
[SessionRoute] Creating session with workingDirectory: /workspace
[AUTH] Authenticating socket: _PNshwOHFuEDTh9jAAAC
[AUTH] Token present: true
[AUTH] Authentication successful for user: 695099320356ef030062423b
[2026-01-02T11:52:59.498Z] [INFO] Client connected via optimized WebSocket
[2026-01-02T11:52:59.507Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'GET',
  url: '/api/conversations/list?limit=100',
  userId: 'anonymous',
  statusCode: 200,
  duration: '15ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
Selected agent: qwen-core-primary at ws://localhost:8001
Selected agent: qwen-core-primary at ws://localhost:8001
Sending ACP message: {
  "id": "sC7lsnHj08c87Cx1EKB_k",
  "type": "session",
  "data": {
    "action": "create",
    "userId": "695099320356ef030062423b",
    "workingDirectory": "/workspace"
  },
  "timestamp": 1767354779521
}
Sending ACP message: {
  "id": "z6Mj2FvkL6pAnfazzAMm_",
  "type": "session",
  "data": {
    "action": "create",
    "userId": "695099320356ef030062423b",
    "workingDirectory": "/workspace"
  },
  "timestamp": 1767354779521
}
ACP Response received: {
  "id": "sC7lsnHj08c87Cx1EKB_k",
  "success": true,
  "data": {
    "session": {
      "sessionId": "nT-lFSm7HtGBSUmj3Wqul",
      "userId": "695099320356ef030062423b"
    }
  },
  "timestamp": 1767354779585
}
Creating session for user 695099320356ef030062423b: nT-lFSm7HtGBSUmj3Wqul (attempt 1)
[2026-01-02T11:52:59.586Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'POST',
  url: '/api/sessions',
  userId: '695099320356ef030062423b',
  statusCode: 200,
  duration: '96ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
ACP Response received: {
  "id": "z6Mj2FvkL6pAnfazzAMm_",
  "success": true,
  "data": {
    "session": {
      "sessionId": "QiZfUpdSqSgTH7yTB2uzN",
      "userId": "695099320356ef030062423b"
    }
  },
  "timestamp": 1767354779586
}
Creating session for user 695099320356ef030062423b: QiZfUpdSqSgTH7yTB2uzN (attempt 1)
[SOCKET EVENT] ai_chat [
  {
    "userId": "demo",
    "sessionId": "QiZfUpdSqSgTH7yTB2uzN",
    "message": "can you use web_fetch to download content of www.google.com",
    "messageId": "1767354781170"
  }
]
[WEBSOCKET] Received ai_chat event: {
  "userId": "demo",
  "sessionId": "QiZfUpdSqSgTH7yTB2uzN",
  "message": "can you use web_fetch to download content of www.google.com",
  "messageId": "1767354781170"
}
[WEBSOCKET] Processing ai_chat for userId: 695099320356ef030062423b sessionId: QiZfUpdSqSgTH7yTB2uzN
[WEBSOCKET] Calling aiService.processMessageStream...
[WEBSOCKET] Got stream generator, starting iteration...
[2026-01-02T11:53:01.171Z] [INFO] Enhanced AI session created {
  userId: '695099320356ef030062423b',
  teamId: undefined,
  projectId: undefined,
  totalSessions: 1
}
[AIServiceClient] streamMessage called
Selected agent: qwen-core-primary at ws://localhost:8001
Sending ACP message: {
  "id": "Uf-G2IucHNAAN4yFRrAcF",
  "type": "chat",
  "data": {
    "action": "send",
    "message": "can you use web_fetch to download content of www.google.com",
    "sessionId": "695099320356ef030062423b-individual-default",
    "userId": "695099320356ef030062423b"
  },
  "timestamp": 1767354781175
}
[2026-01-02T11:53:01.188Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'POST',
  url: '/api/conversations/QiZfUpdSqSgTH7yTB2uzN/save',
  userId: 'anonymous',
  statusCode: 200,
  duration: '9ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[2026-01-02T11:53:01.193Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'GET',
  url: '/api/conversations/list?limit=100',
  userId: 'anonymous',
  statusCode: 200,
  duration: '3ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
ACP Response received: {
  "id": "Uf-G2IucHNAAN4yFRrAcF",
  "success": true,
  "timestamp": 1767354800739,
  "type": "response",
  "content": "I'll fetch the content of www.google.com for you using the web_fetch tool.\n\nI've analyzed the content of the Google homepage and summarized its main elements and structure. The page features a clean, minimalist design with:\n\n1. **Header/Navigation Bar**:\n   - Prominent search bar\n   - Navigation links (Images, Maps, Play, YouTube, News, Gmail, Drive)\n   - \"More ¬ª\" dropdown menu\n   - Web History and Settings links\n   - Sign in functionality\n\n2. **Search Functionality**:\n   - Main search input field\n   - Advanced search link\n\n3. **Language Options**:\n   - Google offered in: Fran√ßais (French)\n\n4. **Footer Section**:\n   - Advertising services links\n   - Business Solutions\n   - About Google\n   - Google.ca (regional variation)\n   - Copyright and legal information (¬© 2026 - Privacy - Terms)\n\nThe structure emphasizes the search experience as the primary function, with standard navigation elements, account management features, and legal/privacy information.\n\nI've marked this task as complete in my todo list."
}
[AIServiceClient] Got content, length: 1014
[WEBSOCKET] Received chunk: {"type":"content","text":"I'll fetch the conte"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"nt of www.google.com"}
[WEBSOCKET] Emitting ai_stream_chunk
[2026-01-02T11:53:20.752Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'POST',
  url: '/api/conversations/QiZfUpdSqSgTH7yTB2uzN/save',
  userId: 'anonymous',
  statusCode: 200,
  duration: '7ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[WEBSOCKET] Received chunk: {"type":"content","text":" for you using the w"}
[WEBSOCKET] Emitting ai_stream_chunk
[2026-01-02T11:53:20.763Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'GET',
  url: '/api/conversations/list?limit=100',
  userId: 'anonymous',
  statusCode: 200,
  duration: '8ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[WEBSOCKET] Received chunk: {"type":"content","text":"eb_fetch tool.\n\nI've"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":" analyzed the conten"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"t of the Google home"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"page and summarized "}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"its main elements an"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"d structure. The pag"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"e features a clean, "}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"minimalist design wi"}
[WEBSOCKET] Emitting ai_stream_chunk
[2026-01-02T11:53:20.853Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'POST',
  url: '/api/conversations/QiZfUpdSqSgTH7yTB2uzN/save',
  userId: 'anonymous',
  statusCode: 200,
  duration: '4ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[WEBSOCKET] Received chunk: {"type":"content","text":"th:\n\n1. **Header/Nav"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"igation Bar**:\n   - "}
[WEBSOCKET] Emitting ai_stream_chunk
[2026-01-02T11:53:20.869Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'GET',
  url: '/api/conversations/list?limit=100',
  userId: 'anonymous',
  statusCode: 200,
  duration: '3ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[WEBSOCKET] Received chunk: {"type":"content","text":"Prominent search bar"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"\n   - Navigation lin"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"ks (Images, Maps, Pl"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"ay, YouTube, News, G"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"mail, Drive)\n   - \"M"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"ore ¬ª\" dropdown menu"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"\n   - Web History an"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"d Settings links\n   "}
[WEBSOCKET] Emitting ai_stream_chunk
[2026-01-02T11:53:20.954Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'POST',
  url: '/api/conversations/QiZfUpdSqSgTH7yTB2uzN/save',
  userId: 'anonymous',
  statusCode: 200,
  duration: '4ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[WEBSOCKET] Received chunk: {"type":"content","text":"- Sign in functional"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"ity\n\n2. **Search Fun"}
[WEBSOCKET] Emitting ai_stream_chunk
[2026-01-02T11:53:20.969Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'GET',
  url: '/api/conversations/list?limit=100',
  userId: 'anonymous',
  statusCode: 200,
  duration: '3ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[WEBSOCKET] Received chunk: {"type":"content","text":"ctionality**:\n   - M"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"ain search input fie"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"ld\n   - Advanced sea"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"rch link\n\n3. **Langu"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"age Options**:\n   - "}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"Google offered in: F"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"ran√ßais (French)\n\n4."}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":" **Footer Section**:"}
[WEBSOCKET] Emitting ai_stream_chunk
[2026-01-02T11:53:21.056Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'POST',
  url: '/api/conversations/QiZfUpdSqSgTH7yTB2uzN/save',
  userId: 'anonymous',
  statusCode: 200,
  duration: '3ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[WEBSOCKET] Received chunk: {"type":"content","text":"\n   - Advertising se"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"rvices links\n   - Bu"}
[WEBSOCKET] Emitting ai_stream_chunk
[2026-01-02T11:53:21.072Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'GET',
  url: '/api/conversations/list?limit=100',
  userId: 'anonymous',
  statusCode: 200,
  duration: '4ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[WEBSOCKET] Received chunk: {"type":"content","text":"siness Solutions\n   "}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"- About Google\n   - "}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"Google.ca (regional "}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"variation)\n   - Copy"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"right and legal info"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"rmation (¬© 2026 - Pr"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"ivacy - Terms)\n\nThe "}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"structure emphasizes"}
[WEBSOCKET] Emitting ai_stream_chunk
[2026-01-02T11:53:21.160Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'POST',
  url: '/api/conversations/QiZfUpdSqSgTH7yTB2uzN/save',
  userId: 'anonymous',
  statusCode: 200,
  duration: '3ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[WEBSOCKET] Received chunk: {"type":"content","text":" the search experien"}
[WEBSOCKET] Emitting ai_stream_chunk
[2026-01-02T11:53:21.173Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'GET',
  url: '/api/conversations/list?limit=100',
  userId: 'anonymous',
  statusCode: 200,
  duration: '2ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[WEBSOCKET] Received chunk: {"type":"content","text":"ce as the primary fu"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"nction, with standar"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"d navigation element"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"s, account managemen"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"t features, and lega"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"l/privacy informatio"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"n.\n\nI've marked this"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":" task as complete in"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":" my todo list."}
[WEBSOCKET] Emitting ai_stream_chunk
[2026-01-02T11:53:21.264Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'POST',
  url: '/api/conversations/QiZfUpdSqSgTH7yTB2uzN/save',
  userId: 'anonymous',
  statusCode: 200,
  duration: '3ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[WEBSOCKET] Received chunk: {"type":"finished"}
[WEBSOCKET] Emitting complete
[WEBSOCKET] Stream iteration complete
[2026-01-02T11:53:21.267Z] [INFO] AI chat streaming completed
Sending ACP message: {
  "id": "Qu5MPscZE7zmXf9OkbU-T",
  "type": "session",
  "data": {
    "action": "getStats",
    "sessionId": "QiZfUpdSqSgTH7yTB2uzN",
    "userId": "695099320356ef030062423b"
  },
  "timestamp": 1767354810984
}
ACP Response received: {
  "id": "Qu5MPscZE7zmXf9OkbU-T",
  "success": true,
  "data": {
    "stats": {
      "sessionId": "QiZfUpdSqSgTH7yTB2uzN",
      "userId": "695099320356ef030062423b",
      "messageCount": 0,
      "tokenUsage": {
        "inputTokens": 0,
        "outputTokens": 0,
        "totalTokens": 0
      },
      "createdAt": "2026-01-02T11:52:59.586Z",
      "lastActivity": "2026-01-02T11:52:59.586Z"
    }
  },
  "timestamp": 1767354810985
}
[SOCKET EVENT] ai_chat [
  {
    "userId": "demo",
    "sessionId": "QiZfUpdSqSgTH7yTB2uzN",
    "message": "can you use web_fetch to download content of this url: https://forums.redflagdeals.com/best-buy-turtle-beach-burst-ii-air-white-44-99-available-online-store-free-shipping-2796771/ then provider a short summary.",
    "messageId": "1767354867381"
  }
]
[WEBSOCKET] Received ai_chat event: {
  "userId": "demo",
  "sessionId": "QiZfUpdSqSgTH7yTB2uzN",
  "message": "can you use web_fetch to download content of this url: https://forums.redflagdeals.com/best-buy-turtle-beach-burst-ii-air-white-44-99-available-online-store-free-shipping-2796771/ then provider a short summary.",
  "messageId": "1767354867381"
}
[WEBSOCKET] Processing ai_chat for userId: 695099320356ef030062423b sessionId: QiZfUpdSqSgTH7yTB2uzN
[WEBSOCKET] Calling aiService.processMessageStream...
[WEBSOCKET] Got stream generator, starting iteration...
[AIServiceClient] streamMessage called
Sending ACP message: {
  "id": "Gvr6CeYvm4zX2lOdRMjN-",
  "type": "chat",
  "data": {
    "action": "send",
    "message": "can you use web_fetch to download content of this url: https://forums.redflagdeals.com/best-buy-turtle-beach-burst-ii-air-white-44-99-available-online-store-free-shipping-2796771/ then provider a short summary.",
    "sessionId": "695099320356ef030062423b-individual-default",
    "userId": "695099320356ef030062423b"
  },
  "timestamp": 1767354867382
}
[2026-01-02T11:54:27.397Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'POST',
  url: '/api/conversations/QiZfUpdSqSgTH7yTB2uzN/save',
  userId: 'anonymous',
  statusCode: 200,
  duration: '5ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[2026-01-02T11:54:27.402Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'GET',
  url: '/api/conversations/list?limit=100',
  userId: 'anonymous',
  statusCode: 200,
  duration: '3ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
Sending ACP message: {
  "id": "u_jEq5fcwF2kaaXYjDYYS",
  "type": "session",
  "data": {
    "action": "getStats",
    "sessionId": "QiZfUpdSqSgTH7yTB2uzN",
    "userId": "695099320356ef030062423b"
  },
  "timestamp": 1767354870986
}
ACP Response received: {
  "id": "u_jEq5fcwF2kaaXYjDYYS",
  "success": true,
  "data": {
    "stats": {
      "sessionId": "QiZfUpdSqSgTH7yTB2uzN",
      "userId": "695099320356ef030062423b",
      "messageCount": 0,
      "tokenUsage": {
        "inputTokens": 0,
        "outputTokens": 0,
        "totalTokens": 0
      },
      "createdAt": "2026-01-02T11:52:59.586Z",
      "lastActivity": "2026-01-02T11:52:59.586Z"
    }
  },
  "timestamp": 1767354870986
}
ACP Response received: {
  "id": "Gvr6CeYvm4zX2lOdRMjN-",
  "success": true,
  "timestamp": 1767354884193,
  "type": "response",
  "content": "I'll use the web_fetch tool to retrieve and summarize the content from that RedFlagDeals forum post about the Best Buy Turtle Beach Burst II Air White headset.\n\nHere's a summary of the RedFlagDeals forum post about the Turtle Beach Burst II Air White headset:\n\n**Deal Summary:**\n- **Price**: Reduced from $129.99 to $44.99 (65% off)\n- **Availability**: Both online and in-store at Best Buy\n- **Shipping**: Free shipping included\n- **Requirements**: Must be logged into your My Best Buy account to access the deal\n- **Expiration**: January 8, 2026\n\nThe deal can be accessed both online (automatic discount when adding to cart) and in-store (verification required at checkout). This appears to be an exclusive Best Buy promotion for their members."
}
[AIServiceClient] Got content, length: 745
[WEBSOCKET] Received chunk: {"type":"content","text":"I'll use the web_fet"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"ch tool to retrieve "}
[WEBSOCKET] Emitting ai_stream_chunk
[2026-01-02T11:54:44.208Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'POST',
  url: '/api/conversations/QiZfUpdSqSgTH7yTB2uzN/save',
  userId: 'anonymous',
  statusCode: 200,
  duration: '8ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[WEBSOCKET] Received chunk: {"type":"content","text":"and summarize the co"}
[WEBSOCKET] Emitting ai_stream_chunk
[2026-01-02T11:54:44.217Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'GET',
  url: '/api/conversations/list?limit=100',
  userId: 'anonymous',
  statusCode: 200,
  duration: '6ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[WEBSOCKET] Received chunk: {"type":"content","text":"ntent from that RedF"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"lagDeals forum post "}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"about the Best Buy T"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"urtle Beach Burst II"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":" Air White headset.\n"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"\nHere's a summary of"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":" the RedFlagDeals fo"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"rum post about the T"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"urtle Beach Burst II"}
[WEBSOCKET] Emitting ai_stream_chunk
[2026-01-02T11:54:44.311Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'POST',
  url: '/api/conversations/QiZfUpdSqSgTH7yTB2uzN/save',
  userId: 'anonymous',
  statusCode: 200,
  duration: '3ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[WEBSOCKET] Received chunk: {"type":"content","text":" Air White headset:\n"}
[WEBSOCKET] Emitting ai_stream_chunk
[2026-01-02T11:54:44.318Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'GET',
  url: '/api/conversations/list?limit=100',
  userId: 'anonymous',
  statusCode: 200,
  duration: '5ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[WEBSOCKET] Received chunk: {"type":"content","text":"\n**Deal Summary:**\n-"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":" **Price**: Reduced "}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"from $129.99 to $44."}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"99 (65% off)\n- **Ava"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"ilability**: Both on"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"line and in-store at"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":" Best Buy\n- **Shippi"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"ng**: Free shipping "}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"included\n- **Require"}
[WEBSOCKET] Emitting ai_stream_chunk
[2026-01-02T11:54:44.415Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'POST',
  url: '/api/conversations/QiZfUpdSqSgTH7yTB2uzN/save',
  userId: 'anonymous',
  statusCode: 200,
  duration: '3ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[WEBSOCKET] Received chunk: {"type":"content","text":"ments**: Must be log"}
[WEBSOCKET] Emitting ai_stream_chunk
[2026-01-02T11:54:44.419Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'GET',
  url: '/api/conversations/list?limit=100',
  userId: 'anonymous',
  statusCode: 200,
  duration: '3ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[WEBSOCKET] Received chunk: {"type":"content","text":"ged into your My Bes"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"t Buy account to acc"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"ess the deal\n- **Exp"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"iration**: January 8"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":", 2026\n\nThe deal can"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":" be accessed both on"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"line (automatic disc"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"ount when adding to "}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"cart) and in-store ("}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"verification require"}
[WEBSOCKET] Emitting ai_stream_chunk
[2026-01-02T11:54:44.521Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'GET',
  url: '/api/conversations/list?limit=100',
  userId: 'anonymous',
  statusCode: 200,
  duration: '4ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[2026-01-02T11:54:44.521Z] [INFO] HTTP Request {
  method: 'RequestLogger.logRequest',
  service: 'team-service',
  httpMethod: 'POST',
  url: '/api/conversations/QiZfUpdSqSgTH7yTB2uzN/save',
  userId: 'anonymous',
  statusCode: 200,
  duration: '4ms',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
  ip: '127.0.0.1',
  error: undefined
}
[WEBSOCKET] Received chunk: {"type":"content","text":"d at checkout). This"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":" appears to be an ex"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"clusive Best Buy pro"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"motion for their mem"}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"content","text":"bers."}
[WEBSOCKET] Emitting ai_stream_chunk
[WEBSOCKET] Received chunk: {"type":"finished"}
[WEBSOCKET] Emitting complete
[WEBSOCKET] Stream iteration complete
[2026-01-02T11:54:44.580Z] [INFO] AI chat streaming completed
Sending ACP message: {
  "id": "mIc8jNhU_Vam9lVH0oKS2",
  "type": "session",
  "data": {
    "action": "getStats",
    "sessionId": "QiZfUpdSqSgTH7yTB2uzN",
    "userId": "695099320356ef030062423b"
  },
  "timestamp": 1767354930992
}
ACP Response received: {
  "id": "mIc8jNhU_Vam9lVH0oKS2",
  "success": true,
  "data": {
    "stats": {
      "sessionId": "QiZfUpdSqSgTH7yTB2uzN",
      "userId": "695099320356ef030062423b",
      "messageCount": 0,
      "tokenUsage": {
        "inputTokens": 0,
        "outputTokens": 0,
        "totalTokens": 0
      },
      "createdAt": "2026-01-02T11:52:59.586Z",
      "lastActivity": "2026-01-02T11:52:59.586Z"
    }
  },
  "timestamp": 1767354930992
}
